{"ast":null,"code":"var _jsxFileName = \"D:\\\\perpus\\\\frontendd\\\\src\\\\context\\\\auth.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { createContext, useContext, useEffect, useState } from \"react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const Role = {\n  Admin: \"Admin\",\n  Admin: \"2\",\n  User: \"User\"\n};\nconst AuthContext = /*#__PURE__*/createContext(undefined);\nexport const AuthProvider = ({\n  children\n}) => {\n  _s();\n  const [token, setToken] = useState(() => {\n    if (typeof window !== \"undefined\") {\n      return window.localStorage.getItem(\"Key_Token\");\n    }\n    return null;\n  });\n  useEffect(() => {\n    if (token) {\n      localStorage.setItem(\"Key_Token\", token);\n    }\n  }, [token]);\n  const login = token => {\n    setToken(token);\n  };\n  const logout = () => {\n    localStorage.removeItem(\"Key_Token\");\n    setToken(null);\n  };\n  const isLogin = () => {\n    return token !== null;\n  };\n  const isRole = () => {\n    if (token == null) return null;\n    try {\n      const provider = JSON.parse(atob(token.split(\".\")[1]));\n      return provider[\"http://schemas.microsoft.com/ws/2008/06/identity/claims/role\"];\n    } catch (error) {\n      console.error('Format token tidak valid', error);\n      return null;\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(AuthContext.Provider, {\n    value: {\n      token,\n      login,\n      logout,\n      isLogin: isLogin(),\n      isRole: isRole()\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 51,\n    columnNumber: 9\n  }, this);\n};\n_s(AuthProvider, \"C+YSbFoMrjvi4zrfM5A23F5XbZc=\");\n_c = AuthProvider;\nexport const useAuth = () => {\n  _s2();\n  const auth = useContext(AuthContext);\n  if (auth === undefined) {\n    throw new Error(\"useAuth must be used within an AuthProvider\");\n  }\n  return auth;\n};\n_s2(useAuth, \"2E+KaGHVlJMhtGjyKmHdHkA1EKU=\");\nvar _c;\n$RefreshReg$(_c, \"AuthProvider\");","map":{"version":3,"names":["React","createContext","useContext","useEffect","useState","jsxDEV","_jsxDEV","Role","Admin","User","AuthContext","undefined","AuthProvider","children","_s","token","setToken","window","localStorage","getItem","setItem","login","logout","removeItem","isLogin","isRole","provider","JSON","parse","atob","split","error","console","Provider","value","fileName","_jsxFileName","lineNumber","columnNumber","_c","useAuth","_s2","auth","Error","$RefreshReg$"],"sources":["D:/perpus/frontendd/src/context/auth.js"],"sourcesContent":["import React, { createContext, useContext, useEffect, useState } from \"react\";\r\n\r\nexport const Role = {\r\n    Admin: \"Admin\",\r\n    Admin: \"2\",\r\n    User: \"User\",\r\n};\r\n\r\nconst AuthContext = createContext(undefined);\r\n\r\nexport const AuthProvider = ({ children }) => {\r\n    const [token, setToken] = useState(() => {\r\n        if (typeof window !== \"undefined\") {\r\n            return window.localStorage.getItem(\"Key_Token\");\r\n        }\r\n        return null;\r\n    });\r\n\r\n    useEffect(() => {\r\n        if (token) {\r\n            localStorage.setItem(\"Key_Token\", token);\r\n        }\r\n    }, [token]);\r\n\r\n    const login = (token) => {\r\n        setToken(token);\r\n    };\r\n\r\n    const logout = () => {\r\n        localStorage.removeItem(\"Key_Token\");\r\n        setToken(null);\r\n    };\r\n\r\n    const isLogin = () => {\r\n        return token !== null;\r\n    };\r\n\r\n    const isRole = () => {\r\n        if (token == null) return null;\r\n\r\n        try {\r\n            const provider = JSON.parse(atob(token.split(\".\")[1]));\r\n            return provider[\"http://schemas.microsoft.com/ws/2008/06/identity/claims/role\"];\r\n        } catch (error) {\r\n            console.error('Format token tidak valid', error);\r\n            return null;\r\n        }\r\n    };\r\n\r\n    return (\r\n        <AuthContext.Provider\r\n            value={{\r\n                token,\r\n                login,\r\n                logout,\r\n                isLogin: isLogin(),\r\n                isRole: isRole(),\r\n            }}\r\n        >\r\n            {children}\r\n        </AuthContext.Provider>\r\n    );\r\n};\r\n\r\nexport const useAuth = () => {\r\n    const auth = useContext(AuthContext);\r\n    if (auth === undefined) {\r\n        throw new Error(\"useAuth must be used within an AuthProvider\");\r\n    }\r\n    return auth;\r\n};\r\n"],"mappings":";;;AAAA,OAAOA,KAAK,IAAIC,aAAa,EAAEC,UAAU,EAAEC,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAE9E,OAAO,MAAMC,IAAI,GAAG;EAChBC,KAAK,EAAE,OAAO;EACdA,KAAK,EAAE,GAAG;EACVC,IAAI,EAAE;AACV,CAAC;AAED,MAAMC,WAAW,gBAAGT,aAAa,CAACU,SAAS,CAAC;AAE5C,OAAO,MAAMC,YAAY,GAAGA,CAAC;EAAEC;AAAS,CAAC,KAAK;EAAAC,EAAA;EAC1C,MAAM,CAACC,KAAK,EAAEC,QAAQ,CAAC,GAAGZ,QAAQ,CAAC,MAAM;IACrC,IAAI,OAAOa,MAAM,KAAK,WAAW,EAAE;MAC/B,OAAOA,MAAM,CAACC,YAAY,CAACC,OAAO,CAAC,WAAW,CAAC;IACnD;IACA,OAAO,IAAI;EACf,CAAC,CAAC;EAEFhB,SAAS,CAAC,MAAM;IACZ,IAAIY,KAAK,EAAE;MACPG,YAAY,CAACE,OAAO,CAAC,WAAW,EAAEL,KAAK,CAAC;IAC5C;EACJ,CAAC,EAAE,CAACA,KAAK,CAAC,CAAC;EAEX,MAAMM,KAAK,GAAIN,KAAK,IAAK;IACrBC,QAAQ,CAACD,KAAK,CAAC;EACnB,CAAC;EAED,MAAMO,MAAM,GAAGA,CAAA,KAAM;IACjBJ,YAAY,CAACK,UAAU,CAAC,WAAW,CAAC;IACpCP,QAAQ,CAAC,IAAI,CAAC;EAClB,CAAC;EAED,MAAMQ,OAAO,GAAGA,CAAA,KAAM;IAClB,OAAOT,KAAK,KAAK,IAAI;EACzB,CAAC;EAED,MAAMU,MAAM,GAAGA,CAAA,KAAM;IACjB,IAAIV,KAAK,IAAI,IAAI,EAAE,OAAO,IAAI;IAE9B,IAAI;MACA,MAAMW,QAAQ,GAAGC,IAAI,CAACC,KAAK,CAACC,IAAI,CAACd,KAAK,CAACe,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;MACtD,OAAOJ,QAAQ,CAAC,8DAA8D,CAAC;IACnF,CAAC,CAAC,OAAOK,KAAK,EAAE;MACZC,OAAO,CAACD,KAAK,CAAC,0BAA0B,EAAEA,KAAK,CAAC;MAChD,OAAO,IAAI;IACf;EACJ,CAAC;EAED,oBACIzB,OAAA,CAACI,WAAW,CAACuB,QAAQ;IACjBC,KAAK,EAAE;MACHnB,KAAK;MACLM,KAAK;MACLC,MAAM;MACNE,OAAO,EAAEA,OAAO,CAAC,CAAC;MAClBC,MAAM,EAAEA,MAAM,CAAC;IACnB,CAAE;IAAAZ,QAAA,EAEDA;EAAQ;IAAAsB,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACS,CAAC;AAE/B,CAAC;AAACxB,EAAA,CApDWF,YAAY;AAAA2B,EAAA,GAAZ3B,YAAY;AAsDzB,OAAO,MAAM4B,OAAO,GAAGA,CAAA,KAAM;EAAAC,GAAA;EACzB,MAAMC,IAAI,GAAGxC,UAAU,CAACQ,WAAW,CAAC;EACpC,IAAIgC,IAAI,KAAK/B,SAAS,EAAE;IACpB,MAAM,IAAIgC,KAAK,CAAC,6CAA6C,CAAC;EAClE;EACA,OAAOD,IAAI;AACf,CAAC;AAACD,GAAA,CANWD,OAAO;AAAA,IAAAD,EAAA;AAAAK,YAAA,CAAAL,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}